<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.uni.wt.project.schedule.model.dao.ScheduleMapper">
	<resultMap type="Schedule" id="scheduleSet">
		<id property="board_no" column="BOARD_NO"/>
		<result property="sch_title" column="SCH_TITLE"/>
		<result property="sch_content" column="SCH_CONTENT"/>
		<result property="sch_attendee" column="SCH_ATTENDEE"/>
		<result property="sch_start" column="SCH_START"/>
		<result property="sch_end" column="SCH_END"/>
		<result property="sch_place" column="SCH_PLACE"/>
		<result property="name" column="NAME"/>
		<result property="create_date" column="CREATE_DATE"/>
		<result property="count" column="COUNT"/>
	</resultMap>

	<select id="detailView" parameterType="int" resultMap="scheduleSet">
		SELECT TO_CHAR(B.CREATE_DATE, 'YYYY-MM-DD HH24:MI') AS CREATE_DATE, B.COUNT, A.*, C.NAME
		FROM BOARD_SCHEDULE A
				 JOIN PJ_BOARD B
					  ON A.BOARD_NO = B.BOARD_NO
				 JOIN EMPLOYEE C
					  ON B.WRITER = C.EMP_NO
		WHERE B.BOARD_NO = #{board_no}
	</select>
	<insert id="insertSch" parameterType="Schedule">
		INSERT INTO BOARD_SCHEDULE
		VALUES (#{board_no}, #{sch_title}, #{sch_attendee}, #{sch_start}, #{sch_end}, #{sch_place}, #{sch_content})
	</insert>
	<update id="editSch" parameterType="Schedule">
		UPDATE BOARD_SCHEDULE
		SET SCH_TITLE = #{sch_title},
			SCH_ATTENDEE = #{sch_attendee},
			SCH_START = #{sch_start},
			SCH_END = #{sch_end},
			SCH_PLACE = #{sch_place},
			SCH_CONTENT = #{sch_content}
		WHERE BOARD_NO = #{board_no}
	</update>
</mapper>